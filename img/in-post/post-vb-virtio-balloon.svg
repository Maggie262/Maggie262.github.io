<svg height="3354" xmlns="http://www.w3.org/2000/svg" xmlns:ev="http://www.w3.org/2001/xml-events" width="3378" xmlns:xlink="http://www.w3.org/1999/xlink" viewBox="0 0 3378 3354"><style type="text/css"><![CDATA[
.st12 {fill:#000000;font-family:Courier New;font-size:11pt;font-weight:bold}
.st11 {fill:#000000;font-family:Times New Roman;font-size:10pt}
.st10 {fill:#000000;font-family:宋体;font-size:11pt;font-weight:bold}
.st14 {fill:#000000;font-family:宋体;font-size:12pt;font-weight:bold}
.st7 {fill:#000000;font-family:宋体;font-size:14pt;font-weight:bold}
.st16 {fill:#000000;font-family:微软雅黑;font-size:16pt;font-weight:bold}
.st20 {fill:#1e768c;font-family:微软雅黑;font-size:12pt;font-weight:bold}
.st17 {fill:#1f6391;font-family:宋体;font-size:12pt;font-weight:bold}
.st22 {fill:#1f6391;font-family:微软雅黑;font-size:10pt}
.st21 {fill:#1f6391;font-family:微软雅黑;font-size:11pt}
.st2 {fill:#1f6391;font-family:微软雅黑;font-size:12pt}
.st23 {fill:#1f6391;font-family:微软雅黑;font-size:15pt}
.st9 {fill:#236ea1}
.st5 {fill:#af5921;font-family:宋体;font-size:12pt}
.st3 {fill:#af5921;font-family:微软雅黑;font-size:12pt}
.st13 {fill:#c00000;font-family:宋体;font-size:15pt;font-weight:bold}
.st15 {fill:#c00000;font-family:微软雅黑;font-size:16pt;font-weight:bold}
.st6 {fill:#ff0000;font-family:微软雅黑;font-size:12pt}
.st8 {fill:#ff0000;font-weight:bold}
.st1 {fill:#ffffff;font-family:宋体;font-size:12pt}
.st19 {fill:#ffffff;font-family:微软雅黑;font-size:12pt}
.st18 {fill:#ffffff;font-family:微软雅黑;font-size:16pt;font-weight:bold}
.st4 {font-weight:bold}
]]></style><defs/><g transform="translate(5,5)" id="page1"><rect height="794" x="0" width="3368" stroke="#808080" fill="#ffffff" y="0"/><g transform="translate(1476.52,364.75)" id="shape1"><path d="M81,128.3L81,0L0,0L0,128.3L81,128.3z" stroke="#3498db" fill="#3498db"/><text class="st1"><tspan x="13" y="52.1">inflate</tspan><tspan x="25" y="70.1">virt</tspan><tspan x="21" y="88.1">queue</tspan></text></g><g transform="translate(1599.52,364.75)" id="shape2"><path d="M85,128.3L85,0L0,0L0,128.3L85,128.3z" stroke="#3498db" fill="#3498db"/><text class="st1"><tspan x="15" y="52.1">deflate</tspan><tspan x="27" y="70.1">virt</tspan><tspan x="23" y="88.1">queue</tspan></text></g><g transform="translate(1755.52,364.75)" id="shape3"><path d="M71,128.3L71,0L0,0L0,128.3L71,128.3z" stroke="#3498db" fill="#3498db"/><text class="st1"><tspan x="12" y="52.1">status</tspan><tspan x="20" y="70.1">virt</tspan><tspan x="16" y="88.1">queue</tspan></text></g><g transform="translate(1478.5,585.5)" id="shape4"><text class="st2"><tspan x="4 20 25 41 49 59 75 91 107 116 120 129 " y="20">① 从vq中取出elem</tspan><tspan x="4 20 36 52 68 84 100 116 125 140 150 156 164 174 183 193 197 207 " y="45">②找到对应的MemoryRegion</tspan><tspan x="4 20 36 46 55 65 74 90 106 122 134 147 160 169 182 191 200 " y="70">③将page标记为DONTNEED</tspan><tspan x="4 20 25 41 46 55 59 68 83 87 97 103 109 116 125 131 136 152 168 176 180 186 192 202 212 221 231 240 " y="96">④ 将(elem,offset)放入virtqueue中</tspan><tspan x="4 20 25 35 45 51 55 61 " y="121">⑤ notify</tspan></text></g><g transform="translate(1949.52,512)" id="shape5"><text class="st2"><tspan x="4 20 36 44 54 70 86 102 111 115 124 " y="20">①从vq中取出elem</tspan><tspan x="4 20 25 41 57 65 69 75 81 85 95 102 112 121 125 129 139 149 159 175 184 200 207 213 222 228 238 245 261 " y="45">② 更新virtio-balloon的7个status字段</tspan><tspan x="4 20 25 41 57 65 69 75 81 85 95 102 112 121 125 129 139 149 159 175 191 " y="70">③ 更新virtio-balloon的字段</tspan><tspan x="4 9 14 19 24 29 34 41 46 53 60 72 79 85 94 100 107 114 122 132 139 148 152 161 " y="96">      - s->stats_vq_elem</tspan><tspan x="4 9 14 19 24 29 34 41 46 53 60 72 79 85 94 100 107 114 122 132 139 149 155 161 168 177 183 " y="121">      - s->stats_vq_offset </tspan><tspan x="4 9 14 19 24 29 34 41 46 53 60 72 79 85 94 100 107 114 118 127 134 140 147 157 167 177 186 192 " y="146">      - s->stats_last_update</tspan><tspan x="4 20 25 41 57 73 89 105 121 125 135 141 150 156 164 173 177 193 209 225 233 242 246 250 260 269 277 " y="171">④ 更新定时器，interval后触发callback</tspan><tspan x="4 20 25 41 57 73 89 97 106 110 114 124 133 141 150 154 159 175 191 199 209 225 232 238 247 253 263 270 286 302 " y="196">⑤ 定时器的callback: 会将vb中status相关字</tspan><tspan x="4 20 36 52 60 64 70 76 86 96 105 115 124 140 156 172 188 204 " y="222">段放到virtqueue中，通知前端</tspan></text></g><g transform="translate(1069,585.5)" id="shape6"><text class="st3"><tspan x="4 14 29 39 55 71 87 95 99 105 111 115 125 132 142 151 155 159 169 179 189 196 202 212 219 225 234 240 250 259 265 281 297 313 " y="20">qmp命令的virtio_balloon_to_target回调函数</tspan><tspan x="4 20 26 35 41 51 60 66 82 92 102 109 115 131 147 157 167 176 183 189 205 221 237 253 269 285 301 " y="45">（target是host期望guest占有的内存大小）</tspan><tspan x="4 20 25 31 40 46 56 65 71 76 88 93 108 112 122 138 144 153 159 169 178 184 200 205 213 223 229 235 244 254 260 267 273 282 297 " y="70">① target = min（target， current_ram）</tspan><tspan x="4 20 25 41 57 65 69 75 81 85 95 102 112 121 125 129 139 149 159 175 191 201 211 226 233 243 252 262 271 278 294 " y="96">② 更新virtio-balloon中的num_pages字段</tspan><tspan x="4 20 25 41 57 73 89 " y="121">③ 通知后端，</tspan><tspan x="105 114 119 126 133 138 149 156 166 177 184 189 195 204 211 219 230 240 246 251 " class="st4">virtio_notify_config</tspan><tspan x="4 20 36 52 68 84 100 116 126 130 136 142 147 159 164 172 182 188 194 203 213 219 226 232 241 256 261 268 273 279 288 294 304 313 319 323 " y="147">（通知后端的是diff = current_ram - target, </tspan><tspan x="4 20 36 52 68 78 87 91 95 105 115 125 141 157 173 189 205 221 " y="172">即，希望balloon中的内存大小）</tspan></text></g><g transform="translate(1443.52,0)" id="shape7"><text class="st5"><tspan x="4 12 20 28 36 44 60 76 92 108 124 140 156 164 172 180 188 196 204 220 236 252 268 284 300 316 332 " y="19">Guest收到后端发出的config改变的中断，触发回</tspan><tspan x="4 20 36 52 " y="41">调函数：</tspan><tspan x="68 77 86 95 104 113 122 131 140 149 158 167 176 185 194 203 212 221 230 239 248 257 266 275 " class="st4">update_balloon_size_func</tspan><tspan x="4 20 36 52 60 68 76 84 92 100 116 132 148 156 164 172 180 188 196 204 220 236 252 268 284 " y="84">①根据target和当前balloon中的内存大小</tspan><tspan x="4 12 20 28 36 44 52 60 " y="105">      - </tspan><tspan x="68 77 86 95 104 113 122 131 140 149 158 167 " class="st4">fill_balloon</tspan><tspan x="176 "> </tspan><tspan x="4 12 20 28 36 44 52 " y="127">      -</tspan><tspan x="60 69 78 87 96 105 114 123 132 141 150 159 168 " class="st4"> leak_balloon</tspan><tspan x="4 20 28 44 60 68 76 84 92 100 108 116 124 132 140 148 156 164 172 188 204 212 220 228 236 244 252 268 284 300 316 " y="149">② 更新balloon_config中的actual字段（实际</tspan><tspan x="4 12 20 28 36 44 52 60 76 92 108 124 140 " y="170">balloon中内存大小）</tspan><tspan x="4 20 28 36 44 52 60 68 76 84 92 100 108 116 124 132 140 148 156 164 172 180 196 212 228 236 244 252 260 268 276 292 308 " y="192">③ update_balloon_size函数：config信息改</tspan><tspan x="4 20 36 44 52 60 68 76 84 92 " y="213">变，vm-exit，</tspan><tspan x="108 117 126 135 144 161 178 195 212 221 230 239 248 257 " class="st4">qemu后端更新config</tspan></text></g><g transform="translate(1181.02,199)" id="shape8"><text class="st2"><tspan x="4.25 10.25 14.25 18.25 22.25 29.25 39.25 48.25 52.25 56.25 66.25 76.25 86.25 91.25 98.25 103.25 107.25 116.25 125.25 134.25 141.25 151.25 160.25 164.25 168.25 178.25 188.25 " y="20">fill_balloon / leak_balloon</tspan><tspan x="4.25 20.25 25.25 35.25 45.25 54.25 61.25 67.25 83.25 99.25 115.25 125.25 134.25 144.25 153.25 " y="45">① guest中分配pages</tspan><tspan x="4.25 20.25 25.25 41.25 57.25 65.25 75.25 82.25 94.25 104.25 114.25 129.25 136.25 146.25 152.25 162.25 " y="70">② 更新vb->num_pfns</tspan><tspan x="4.25 20.25 25.25 41.25 57.25 67.25 77.25 84.25 90.25 106.25 110.25 120.25 126.25 130.25 139.25 145.25 154.25 161.25 169.25 179.25 195.25 211.25 221.25 230.25 236.25 240.25 249.25 255.25 264.25 271.25 281.25 291.25 300.25 310.25 319.25 " y="96">③ 通知host（inflate_vq或者deflate_queue）</tspan></text></g><g transform="matrix(-0.93,0.37,-0.37,-0.93,1486.5,109)" id="shape9"><path d="M0,0C171.9,68.9,209.8,69.6,237.5,4.1" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M239.2,0L234.4,3.7C235.4,3.5,236.5,3.6,237.5,4.1C238.5,4.5,239.4,5.1,240,5.9L239.2,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0,1,-1,0,1486.5,302)" id="shape10"><path d="M0,0C12.2,0,45.6,0,57.6,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M62,0L56.8,-3C57.3,-2.1,57.6,-1.1,57.6,0C57.6,1.1,57.3,2.1,56.8,3L62,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0,-1,1,0,1557.5,364.8)" id="shape11"><path d="M0,0C22.9,0,53,0,72.4,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M76.8,0L71.6,-3C72.1,-2.1,72.4,-1.1,72.4,0C72.4,1.1,72.1,2.1,71.6,3L76.8,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="translate(1519.52,255.38)" id="shape12"><text class="st2"><tspan x="4.094 14.094 23.094 27.094 31.094 41.094 51.094 61.094 68.094 77.094 85.094 " y="20">balloon_ack</tspan></text></g><g transform="matrix(0,-1,1,0,1604.5,364)" id="shape13"><path d="M0,0C35.1,0,54.6,0,72.4,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M76.8,0L71.6,-3C72.1,-2.1,72.4,-1.1,72.4,0C72.4,1.1,72.1,2.1,71.6,3L76.8,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0.71,-0.71,0.71,0.71,1791,364.8)" id="shape14"><path d="M0,0C116.7,-116.7,182.9,-35.5,214,-3.1" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M217.1,0L215.6,-5.8C215.3,-4.8,214.8,-3.9,214,-3.1C213.2,-2.4,212.3,-1.9,211.3,-1.6L217.1,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="translate(1949.52,189.38)" id="shape15"><text class="st2"><tspan x="4 11 17 26 32 39 46 52 61 71 81 90 97 103 108 " y="20">stats_request()</tspan></text></g><g transform="translate(2015.52,217.5)" id="shape16"><text class="st2"><tspan x="4 20 25 41 57 65 75 91 107 115 124 128 132 142 151 159 168 172 177 187 197 207 216 222 231 238 248 257 261 265 275 285 295 302 309 315 324 330 337 344 357 367 373 " y="20">① 调用vb中的callback: update_balloon_stats_work</tspan><tspan x="4 20 25 41 49 59 75 91 107 116 120 129 144 160 176 192 " y="45">② 从vq中取出elem，不管他</tspan><tspan x="4 20 25 41 57 67 77 86 93 99 115 131 147 157 166 170 174 184 194 204 220 229 245 252 258 267 273 283 " y="70">③ 根据guest，更新balloon的7个status</tspan><tspan x="4 20 25 41 57 64 70 79 85 92 99 107 " y="96">④ 放入stats_vq</tspan><tspan x="4 20 25 41 57 73 " y="121">⑤ 通知后端</tspan></text></g><g transform="matrix(-0.94,0.35,-0.35,-0.94,2015.5,288)" id="shape17"><path d="M0,0C84.2,29.2,192.7,86.3,215.7,4.3" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M216.8,0L212.6,4.3C213.5,4,214.6,4,215.7,4.3C216.7,4.5,217.7,5.1,218.4,5.8L216.8,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0.94,0.34,-0.34,0.94,1826.5,493)" id="shape18"><path d="M0,0C18.4,34,48.5,25.9,116.1,1.5" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M120.2,0L114.3,-1.1C115.1,-0.4,115.7,.5,116.1,1.5C116.4,2.5,116.5,3.6,116.3,4.6L120.2,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(-0.59,-0.81,0.81,-0.59,1944.5,718)" id="shape19"><path d="M0,0C117.3,-158.1,196.3,-47.6,271.9,-2.2" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M275.7,0L272.8,-5.2C272.8,-4.2,272.5,-3.2,271.9,-2.2C271.4,-1.3,270.6,-0.5,269.7,-0L275.7,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><path transform="translate(1069.48,351)" d="M0,0L1358.5,0" stroke="#236ea1" id="shape20" stroke-width="3" fill="none"/><path transform="translate(1068.48,506)" d="M0,0L1354.5,0" stroke="#236ea1" id="shape21" stroke-width="3" fill="none"/><g transform="matrix(0,1,-1,0,1517,493)" id="shape22"><path d="M4,0L88.6,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M4,4L0,0L4,-4L4,4" stroke="#236ea1" stroke-width="1" fill="#236ea1"/><path stroke-linecap="round" d="M93,0L87.8,-3C88.3,-2.1,88.6,-1.1,88.6,0C88.6,1.1,88.3,2.1,87.8,3L93,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0,1,-1,0,1642,493)" id="shape23"><path d="M4,0L88.6,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M4,4L0,0L4,-4L4,4" stroke="#236ea1" stroke-width="1" fill="#236ea1"/><path stroke-linecap="round" d="M93,0L87.8,-3C88.3,-2.1,88.6,-1.1,88.6,0C88.6,1.1,88.3,2.1,87.8,3L93,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0.88,0.47,-0.47,0.88,1498,307)" id="shape24"><path d="M0,0L116.4,0" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M120.8,0L115.6,-3C116.1,-2.1,116.4,-1.1,116.4,0C116.4,1.1,116.1,2.1,115.6,3L120.8,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="translate(1077,400.57)" id="shape25"><text class="st6"><tspan x="4 12 22 32 38 42 52 62 68 77 83 87 97 107 112 120 130 139 149 159 168 173 177 187 193 202 208 214 224 234 " y="20">configuration change interrupt</tspan><tspan x="4 12 16 22 28 33 43 53 62 72 81 86 90 100 106 115 121 127 137 147 " y="45">virt queue interrupt</tspan></text></g><path transform="matrix(0,1,-1,0,1222.9,461.4)" d="M0,19.8L19.8,0L19.8,11.9L44.6,11.9L44.6,27.7L19.8,27.7L19.8,39.6L0,19.8z" stroke="#3498db" id="shape26" fill="#3498db"/><path transform="matrix(0,1,-1,0,1222.9,353.6)" d="M0,19.8L19.8,0L19.8,11.9L47,11.9L47,27.7L19.8,27.7L19.8,39.6L0,19.8z" stroke="#3498db" id="shape27" fill="#3498db"/><path transform="translate(1069,400.57)" d="M268.2,60.9L268.2,0L0,0L0,60.9L268.2,60.9z" stroke="#3498db" id="shape28" stroke-width="3" fill="none"/><g transform="translate(1030.94,506)" id="shape29"><path d="M75.1,36L75.1,0L0,0L0,36L75.1,36z" stroke="#3498db" stroke-width="3" fill="none"/><text class="st7"><tspan x="16" y="25">Qemu</tspan></text></g><g transform="translate(1028.94,315)" id="shape30"><path d="M81.1,36L81.1,0L0,0L0,36L81.1,36z" stroke="#3498db" stroke-width="3" fill="none"/><text class="st7"><tspan x="13" y="25">Guest</tspan></text></g><g transform="translate(694,23.5)" id="shape31"><text class="st3"><tspan x="4.397 20.397 36.397 " class="st8" y="20">说明：</tspan><tspan x="4.397 11.397 18.397 25.397 41.397 57.397 67.397 77.397 84.397 90.397 106.397 122.397 138.397 154.397 162.397 172.397 182.397 188.397 192.397 202.397 212.397 218.397 227.397 233.397 237.397 247.397 257.397 " y="46">---表示host发送中断configuration </tspan><tspan x="4.397 12.397 22.397 31.397 41.397 51.397 60.397 65.397 69.397 79.397 85.397 94.397 100.397 106.397 116.397 126.397 132.397 148.397 164.397 " y="72">change interrupt给前端</tspan><tspan x="4.397 11.397 18.397 25.397 41.397 57.397 67.397 77.397 84.397 90.397 106.397 122.397 130.397 134.397 140.397 146.397 151.397 161.397 171.397 180.397 190.397 199.397 204.397 208.397 218.397 224.397 233.397 239.397 245.397 255.397 265.397 271.397 " class="st9" y="97">---表示host发送virt queue interrupt给</tspan><tspan x="4.397 20.397 " class="st9" y="122">前端</tspan></text></g><g transform="translate(1256.15,435)" id="shape32"><path d="M81.1,26.4L81.1,0L0,0L0,26.4L81.1,26.4z" stroke="#3498db" stroke-width="3" fill="none"/><text class="st10"><tspan x="9" y="18.7">中断注入</tspan></text></g></g><g transform="translate(1128,804)" id="page2"><rect height="794" x="0" width="1123" stroke="#808080" fill="#ffffff" y="0"/><g transform="translate(483,100)" id="shape33"><text class="st11"><tspan x="4 10 14 18 25 31 35 " y="16">struct </tspan><tspan x="38 43 47 53 57 61 67 74 80 86 90 94 100 106 113 120 126 130 136 " class="st4">virtio_balloon_stat</tspan><tspan x="140 143 "> {</tspan><tspan x="4 7 10 13 16 23 30 37 40 44 48 51 58 64 70 73 77 83 90 " y="32">    __virtio16 tag;</tspan><tspan x="4 7 10 13 16 23 30 37 40 44 48 51 58 64 70 73 80 86 89 " y="48">    __virtio64 val;</tspan><tspan x="4 10 13 22 29 41 50 57 64 74 82 91 98 107 " y="64">} QEMU_PACKED;</tspan></text></g><g transform="translate(686.99,222)" id="shape34"><text class="st12"><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 " y="15">typedef struct VirtIOBalloon {</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 " y="35">    VirtIODevice parent_obj;</tspan><tspan x="4.01 " y="56"> </tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 92.01 101.01 110.01 119.01 128.01 137.01 146.01 155.01 164.01 173.01 " y="79">    // 3个virt queue</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 274.01 " y="100">    VirtQueue *ivq, *dvq, *svq;</tspan><tspan x="4.01 " y="121"> </tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 146.01 162.01 171.01 180.01 189.01 198.01 207.01 223.01 " y="144">    // balloon中的pages统计</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 " y="165">    uint32_t num_pages;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 " y="185">    uint32_t actual;</tspan><tspan x="4.01 " y="206"> </tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 137.01 " y="229">    // status相关</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 274.01 283.01 292.01 301.01 310.01 319.01 328.01 337.01 346.01 355.01 " y="250">    uint64_t stats[VIRTIO_BALLOON_S_NR];</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 274.01 283.01 292.01 301.01 310.01 319.01 " y="271">    VirtQueueElement *stats_vq_elem;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 " y="291">    size_t stats_vq_offset;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 137.01 153.01 169.01 " y="335">    // status更新相关</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 " y="356">    QEMUTimer *stats_timer;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 " y="376">    int64_t stats_last_update;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 247.01 256.01 265.01 274.01 283.01 " y="396">    int64_t stats_poll_interval;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 148.01 157.01 166.01 175.01 184.01 193.01 202.01 211.01 220.01 229.01 238.01 " y="417">    uint32_t host_features;</tspan><tspan x="4.01 13.01 22.01 31.01 40.01 49.01 58.01 67.01 76.01 85.01 94.01 103.01 112.01 121.01 130.01 139.01 " y="437">} VirtIOBalloon;</tspan></text></g><g transform="translate(42.98,201.5)" id="shape35"><text class="st12"><tspan x="4 13 22 31 40 49 58 67 76 85 94 103 112 121 130 139 148 157 166 175 184 193 202 " y="15">struct virtio_balloon {</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 " y="32">	struct virtio_device *vdev;</tspan><tspan x="4 7 16 25 34 43 59 68 77 86 95 104 113 122 131 140 " y="52">	// 3个virt queue</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 403 412 421 430 439 448 457 466 475 " y="69">	struct virtqueue *inflate_vq, *deflate_vq, *stats_vq;</tspan><tspan x="4 " y="86"> </tspan><tspan x="4 7 16 25 34 50 66 82 " y="106">	// 回调函数</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 403 " y="123">	struct work_struct update_balloon_stats_work;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 " y="140">	struct work_struct update_balloon_size_work;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 " y="174">	spinlock_t stop_update_lock;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 " y="191">	bool stop_update;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 " y="225">	wait_queue_head_t acked;</tspan><tspan x="4 " y="242"> </tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 113 129 138 147 156 165 174 190 " y="262">	// balloon中的pages统计</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 " y="279">	unsigned int num_pages;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 " y="313">	struct balloon_dev_info vb_dev_info;</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 " y="330">	struct mutex balloon_lock;</tspan><tspan x="4 7 16 25 34 43 52 61 " y="364">	// pfns</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 " y="381">	unsigned int num_pfns;</tspan><tspan x="4 7 16 25 34 50 66 75 84 93 102 118 134 150 166 182 198 207 216 225 234 250 266 275 284 293 302 311 320 329 338 " y="401">	// 通知host时，将所有的pfns放入virtqueue</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 403 412 421 " y="418">	__virtio32 pfns[VIRTIO_BALLOON_ARRAY_PFNS_MAX];</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 104 " y="455">	// status相关</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 403 412 421 430 439 448 457 466 475 484 " y="472">	struct virtio_balloon_stat stats[VIRTIO_BALLOON_S_NR];</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 232 241 250 259 268 277 286 295 304 313 322 331 340 349 358 367 376 385 394 403 412 421 430 439 448 457 466 475 " y="506">	/* To register callback in oom notifier call chain */</tspan><tspan x="4 7 16 25 34 43 52 61 70 79 88 97 106 115 124 133 142 151 160 169 178 187 196 205 214 223 " y="523">	struct notifier_block nb;</tspan><tspan x="4 13 " y="540">};</tspan></text></g><g transform="translate(28,175)" id="shape36"><text class="st13"><tspan x="10" y="24">Guest</tspan></text></g><g transform="translate(676,184)" id="shape37"><text class="st13"><tspan x="16" y="24">Qemu</tspan></text></g></g><g transform="translate(438,1603)" id="page3"><rect height="947" x="0" width="2503" stroke="#808080" fill="#ffffff" y="0"/><g transform="translate(1366,516.09)" id="shape38"><path d="M246,25.4L246,11C246,4.9,241.1,0,235,0L11,0C4.9,0,0,4.9,0,11L0,25.4C0,31.5,4.9,36.4,11,36.4L235,36.4C241.1,36.4,246,31.5,246,25.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="15" y="24.2">virtio_balloon_to_target</tspan></text></g><g transform="translate(1949.82,704.41)" id="shape39"><path d="M162.7,39.9L162.7,11C162.7,4.9,157.8,0,151.7,0L11,0C4.9,0,0,4.9,0,11L0,39.9C0,46,4.9,50.9,11,50.9L151.7,50.9C157.8,50.9,162.7,46,162.7,39.9z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="27.4" y="31.4">vm_interrupt</tspan></text></g><g transform="translate(1753.17,622.36)" id="shape40"><path d="M232.4,23.4L232.4,11C232.4,4.9,227.5,0,221.4,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L221.4,34.4C227.5,34.4,232.4,29.5,232.4,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="22.2" y="23.2">virtio_config_changed</tspan></text></g><g transform="translate(2142.15,625.11)" id="shape41"><path d="M162.7,20.6L162.7,11C162.7,4.9,157.8,0,151.7,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L151.7,31.6C157.8,31.6,162.7,26.7,162.7,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="14.4" y="21.8">vring_interrupt</tspan></text></g><g transform="translate(1753.17,566.86)" id="shape42"><path d="M233,23.4L233,11C233,4.9,228.1,0,222,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L222,34.4C228.1,34.4,233,29.5,233,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="13" y="23.2">__virtio_config_changed</tspan></text></g><g transform="translate(1753.17,511.36)" id="shape43"><path d="M233,23.4L233,11C233,4.9,228.1,0,222,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L222,34.4C228.1,34.4,233,29.5,233,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="9" y="23.2">drv->config_changed(dev)</tspan></text></g><g transform="translate(1753.17,455.85)" id="shape44"><path d="M233,23.4L233,11C233,4.9,228.1,0,222,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L222,34.4C228.1,34.4,233,29.5,233,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="31" y="23.2">virtballoon_changed</tspan></text></g><g transform="translate(1753.17,403.17)" id="shape45"><path d="M233,23.4L233,11C233,4.9,228.1,0,222,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L222,34.4C228.1,34.4,233,29.5,233,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="9" y="23.2">update_balloon_size_func</tspan></text></g><g transform="translate(1677.34,327.52)" id="shape46"><path d="M139.3,23.4L139.3,11C139.3,4.9,134.4,0,128.3,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L128.3,34.4C134.4,34.4,139.3,29.5,139.3,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="16.2" y="23.2">fill_balloon</tspan></text></g><g transform="translate(1910.36,326.15)" id="shape47"><path d="M139.3,23.4L139.3,11C139.3,4.9,134.4,0,128.3,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L128.3,34.4C134.4,34.4,139.3,29.5,139.3,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="16.2" y="23.2">leak_balloon</tspan></text></g><g transform="translate(1799.71,245.68)" id="shape48"><path d="M139.3,23.4L139.3,11C139.3,4.9,134.4,0,128.3,0L11,0C4.9,0,0,4.9,0,11L0,23.4C0,29.5,4.9,34.4,11,34.4L128.3,34.4C134.4,34.4,139.3,29.5,139.3,23.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="29.2" y="23.2">tell_host</tspan></text></g><g transform="translate(2142.15,569.61)" id="shape49"><path d="M162.7,20.6L162.7,11C162.7,4.9,157.8,0,151.7,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L151.7,31.6C157.8,31.6,162.7,26.7,162.7,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="32.4" y="21.8">vq.callback</tspan></text></g><g transform="translate(2348.64,484.33)" id="shape50"><path d="M115.9,20.6L115.9,11C115.9,4.9,111,0,104.9,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L104.9,31.6C111,31.6,115.9,26.7,115.9,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="8.4" y="21.8">balloon_ack</tspan></text></g><g transform="translate(1376.51,440.91)" id="shape51"><path d="M226.9,25.7L226.9,11C226.9,4.9,221.9,0,215.9,0L11,0C4.9,0,0,4.9,0,11L0,25.7C0,31.7,4.9,36.7,11,36.7L215.9,36.7C221.9,36.7,226.9,31.7,226.9,25.7z" stroke="#16a58a" fill="#118972"/><text class="st14"><tspan x="64.4" y="24.3">qmp command</tspan></text></g><g transform="translate(1376.51,591.02)" id="shape52"><path d="M226.9,25.4L226.9,11C226.9,4.9,221.9,0,215.9,0L11,0C4.9,0,0,4.9,0,11L0,25.4C0,31.5,4.9,36.4,11,36.4L215.9,36.4C221.9,36.4,226.9,31.5,226.9,25.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="23.4" y="24.2">virtio_notify_config</tspan></text></g><g transform="translate(596.06,440.6)" id="shape53"><path d="M261.4,25.4L261.4,11C261.4,4.9,256.4,0,250.4,0L11,0C4.9,0,0,4.9,0,11L0,25.4C0,31.5,4.9,36.4,11,36.4L250.4,36.4C256.4,36.4,261.4,31.5,261.4,25.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="9.2" y="15.2">virtio_balloon_receive_stat</tspan><tspan x="126.2" y="33.2">s</tspan></text></g><g transform="translate(736.61,574.2)" id="shape54"><path d="M261.4,37.9L261.4,11C261.4,4.9,256.4,0,250.4,0L11,0C4.9,0,0,4.9,0,11L0,37.9C0,43.9,4.9,48.9,11,48.9L250.4,48.9C256.4,48.9,261.4,43.9,261.4,37.9z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="72.2" y="21.4">virtio_notify</tspan><tspan x="36.2" y="39.4">(s->stats_vq_elem, 0)</tspan></text></g><g transform="translate(454.27,574.2)" id="shape55"><path d="M261.4,37.9L261.4,11C261.4,4.9,256.4,0,250.4,0L11,0C4.9,0,0,4.9,0,11L0,37.9C0,43.9,4.9,48.9,11,48.9L250.4,48.9C256.4,48.9,261.4,43.9,261.4,37.9z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="14.2" y="21.4">balloon_stats_change_timer</tspan><tspan x="86.2" y="39.4">(interval)</tspan></text></g><g transform="translate(106.59,466.86)" id="shape56"><path d="M226.9,25.7L226.9,11C226.9,4.9,221.9,0,215.9,0L11,0C4.9,0,0,4.9,0,11L0,25.7C0,31.7,4.9,36.7,11,36.7L215.9,36.7C221.9,36.7,226.9,31.7,226.9,25.7z" stroke="#839292" fill="#236ea1"/><text class="st14"><tspan x="91.4" y="24.3">Timer</tspan></text></g><g transform="translate(106.59,528.81)" id="shape57"><path d="M226.9,25.7L226.9,11C226.9,4.9,221.9,0,215.9,0L11,0C4.9,0,0,4.9,0,11L0,25.7C0,31.7,4.9,36.7,11,36.7L215.9,36.7C221.9,36.7,226.9,31.7,226.9,25.7z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="19.4" y="24.3">balloon_stats_poll_cb</tspan></text></g><g transform="translate(40.01,596.26)" id="shape58"><path d="M357.5,59.1L357.5,11C357.5,4.9,352.6,0,346.5,0L11,0C4.9,0,0,4.9,0,11L0,59.1C0,65.1,4.9,70.1,11,70.1L346.5,70.1C352.6,70.1,357.5,65.1,357.5,59.1z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="120.3" y="23">virtio_notify</tspan><tspan x="98.3" y="41">(s->stats_vq_elem,</tspan><tspan x="93.3" y="59">s->stats_vq_offset)</tspan></text></g><g transform="translate(1489.94,477.57)" id="shape59"><path d="M0,0L0,14.5C0,18.9,-0.2,26.1,-0.5,30.5L-0.7,34.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-0.9,38.5L2.4,33.5C1.4,34,.4,34.2,-0.7,34.1C-1.8,34.1,-2.8,33.7,-3.6,33.2L-0.9,38.5" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1489,552.5)" id="shape60"><path d="M0,0L0,14.5C0,18.9,.2,26.1,.5,30.5L.7,34.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M.9,38.5L3.6,33.2C2.8,33.7,1.8,34.1,.7,34.1C-0.4,34.2,-1.4,34,-2.4,33.5L.9,38.5" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1489.94,627.43)" id="shape61"><path d="M0,0L0,139.3C0,145.3,4.9,150.3,11,150.3L530.2,150.3C536.3,150.3,541.2,145.3,541.2,139.3L541.2,132.3" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M541.2,127.9L538.2,133.1C539.1,132.6,540.2,132.3,541.2,132.3C542.3,132.3,543.4,132.6,544.2,133.1L541.2,127.9" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-58.4" width="119.6" fill="#ffffff" y="11"/><text class="st14"><tspan x="-58.5" y="26">configuration</tspan></text><rect height="18" x="71.8" width="275.9" fill="#ffffff" y="141.3"/><text class="st14"><tspan x="71.7" y="156.3">configuration change interrupt</tspan></text></g><g transform="translate(2031.19,704.41)" id="shape62"><path d="M0,0L0,-8.7C0,-12.5,-3.1,-15.7,-7,-15.7L-150.8,-15.7C-156.9,-15.7,-161.8,-20.6,-161.8,-26.7L-161.8,-43.3" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-161.8,-47.7L-164.8,-42.5C-163.9,-43,-162.9,-43.3,-161.8,-43.3C-160.7,-43.3,-159.7,-43,-158.8,-42.5L-161.8,-47.7" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2031.19,704.41)" id="shape63"><path d="M0,0L0,-8.7C0,-12.5,3.1,-15.7,7,-15.7L181.3,-15.7C187.4,-15.7,192.3,-20.6,192.3,-26.7L192.3,-43.3" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M192.3,-47.7L189.3,-42.5C190.2,-43,191.2,-43.3,192.3,-43.3C193.4,-43.3,194.5,-43,195.3,-42.5L192.3,-47.7" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.37,622.36)" id="shape64"><path d="M0,0L0,-9.1C0,-11.3,.1,-14.9,.2,-17.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M.3,-21.1L-2.9,-16C-2,-16.5,-1,-16.8,.1,-16.7C1.2,-16.7,2.2,-16.4,3.1,-15.8L.3,-21.1" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.68,566.86)" id="shape65"><path d="M0,0L0,-16.7" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-21.1L-3,-15.9C-2.1,-16.4,-1.1,-16.7,0,-16.7C1.1,-16.7,2.1,-16.4,3,-15.9L0,-21.1" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.68,511.36)" id="shape66"><path d="M0,0L0,-16.7" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-21.1L-3,-15.9C-2.1,-16.4,-1.1,-16.7,0,-16.7C1.1,-16.7,2.1,-16.4,3,-15.9L0,-21.1" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.68,455.85)" id="shape67"><path d="M0,0L0,-13.9" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-18.3L-3,-13.1C-2.1,-13.6,-1.1,-13.9,0,-13.9C1.1,-13.9,2.1,-13.6,3,-13.1L0,-18.3" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.68,403.17)" id="shape68"><path d="M0,0L0,-14.3C0,-20.3,-4.9,-25.3,-11,-25.3L-114.7,-25.3C-119.1,-25.3,-122.7,-28.8,-122.7,-33.3L-122.7,-36.9" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-122.7,-41.3L-125.7,-36.1C-124.8,-36.6,-123.8,-36.9,-122.7,-36.9C-121.6,-36.9,-120.6,-36.6,-119.7,-36.1L-122.7,-41.3" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1869.68,403.17)" id="shape69"><path d="M0,0L0,-15.6C0,-21.7,4.9,-26.6,11,-26.6L102.3,-26.6C106.8,-26.6,110.3,-30.2,110.3,-34.6L110.3,-38.2" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M110.3,-42.6L107.3,-37.4C108.2,-38,109.3,-38.2,110.3,-38.2C111.4,-38.2,112.5,-38,113.3,-37.4L110.3,-42.6" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1747,327.52)" id="shape70"><path d="M0,0L0,-8.5C0,-12.3,3.1,-15.5,7,-15.5L111.4,-15.5C117.4,-15.5,122.4,-20.4,122.4,-26.5L122.4,-43.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M122.4,-47.5L119.4,-42.3C120.2,-42.8,121.3,-43.1,122.4,-43.1C123.5,-43.1,124.5,-42.8,125.4,-42.3L122.4,-47.5" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1980.02,326.14)" id="shape71"><path d="M0,0L0,-7.1C0,-10.9,-3.1,-14.1,-7,-14.1L-99.7,-14.1C-105.7,-14.1,-110.7,-19,-110.7,-25.1L-110.7,-41.7" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-110.7,-46.1L-113.7,-40.9C-112.8,-41.4,-111.7,-41.7,-110.7,-41.7C-109.6,-41.7,-108.5,-41.4,-107.7,-40.9L-110.7,-46.1" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2049.98,170.03)" id="shape72"><path d="M0,0L0,-16.2C0,-22.3,-4.9,-27.2,-11,-27.2L-872,-27.2C-878,-27.2,-883,-22.3,-883,-16.2L-883,263.4" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-883,267.8L-880,262.6C-880.9,263.1,-881.9,263.4,-883,263.4C-884.1,263.4,-885.1,263.1,-886,262.6L-883,267.8" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-669.8" width="193.2" fill="#ffffff" y="-36.2"/><text class="st14"><tspan x="-669.9" y="-21.2">inflate/deflate queue</tspan></text><rect height="18" x="-918.9" width="73.6" fill="#ffffff" y="229.8"/><rect height="18" x="-913.8" width="64.4" fill="#ffffff" y="247.8"/><text class="st14"><tspan x="-919" y="244.8">inflate/</tspan><tspan x="-914" y="262.8">deflate</tspan></text></g><path transform="matrix(0,1,-1,0,1654.5,68.7)" d="M0,0L831.3,0" stroke="#c00000" id="shape73" stroke-width="3.33333" fill="none"/><g transform="matrix(0,-1,1,0,2223.5,625.1)" id="shape74"><path d="M0,0L19.5,0" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M23.9,0L18.7,-3C19.2,-2.1,19.5,-1.1,19.5,0C19.5,1.1,19.2,2.1,18.7,3L23.9,0" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1030,437.85)" id="shape75"><path d="M274,25.4L274,11C274,4.9,269.1,0,263,0L11,0C4.9,0,0,4.9,0,11L0,25.4C0,31.5,4.9,36.4,11,36.4L263,36.4C269.1,36.4,274,31.5,274,25.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="11" y="24.2">virtio_balloon_handle_output</tspan></text></g><g transform="translate(1035.59,512.3)" id="shape76"><path d="M261.4,25.4L261.4,11C261.4,4.9,256.4,0,250.4,0L11,0C4.9,0,0,4.9,0,11L0,25.4C0,31.5,4.9,36.4,11,36.4L250.4,36.4C256.4,36.4,261.4,31.5,261.4,25.4z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="77.2" y="24.2">balloon_page</tspan></text></g><g transform="translate(1035.59,588)" id="shape77"><path d="M261.4,36.6L261.4,11C261.4,4.9,256.4,0,250.4,0L11,0C4.9,0,0,4.9,0,11L0,36.6C0,42.7,4.9,47.6,11,47.6L250.4,47.6C256.4,47.6,261.4,42.7,261.4,36.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="72.2" y="20.8">virtio_notify</tspan><tspan x="68.2" y="38.8">(elem, offset)</tspan></text></g><g transform="translate(1167,474.27)" id="shape78"><path d="M0,0L0,14C0,18.4,-0.2,25.6,-0.4,30L-0.5,33.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-0.7,38L2.5,33C1.6,33.4,.6,33.7,-0.5,33.6C-1.6,33.6,-2.6,33.3,-3.5,32.7L-0.7,38" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1166.28,548.72)" id="shape79"><path d="M0,0L0,34.9" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,39.3L3,34.1C2.1,34.6,1.1,34.9,0,34.9C-1.1,34.9,-2.1,34.6,-3,34.1L0,39.3" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1166.28,635.63)" id="shape80"><path d="M0,0L0,150.1C0,156.1,4.9,161.1,11,161.1L853.9,161.1C860,161.1,864.9,156.1,864.9,150.1L864.9,124.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M864.9,119.7L861.9,124.9C862.8,124.4,863.8,124.1,864.9,124.1C866,124.1,867,124.4,867.9,124.9L864.9,119.7" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-39.6" width="82.8" fill="#ffffff" y="2"/><rect height="18" x="-76.4" width="156.4" fill="#ffffff" y="20"/><text class="st14"><tspan x="-40.5" y="17">virtqueue</tspan><tspan x="-76.5" y="35">(inflate,deflate)</tspan></text><rect height="18" x="305.2" width="138" fill="#ffffff" y="152.1"/><text class="st14"><tspan x="305.1" y="167.1">vring interrupt</tspan></text></g><g transform="translate(220.02,503.51)" id="shape81"><path d="M0,0L0,20.9" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,25.3L3,20.1C2.1,20.6,1.1,20.9,0,20.9C-1.1,20.9,-2.1,20.6,-3,20.1L0,25.3" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(220.02,565.46)" id="shape82"><path d="M0,0L0,14.8C0,14.8,0,14.8,0,14.8L-1.2,14.8C-1.2,14.8,-1.2,14.8,-1.2,14.8L-1.2,26.4" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-1.2,30.8L1.8,25.6C.9,26.1,-0.1,26.4,-1.2,26.4C-2.3,26.4,-3.4,26.1,-4.2,25.6L-1.2,30.8" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(218.78,666.31)" id="shape83"><path d="M0,0L0,171.7C0,177.8,4.9,182.7,11,182.7L1801.4,182.7C1807.5,182.7,1812.4,177.8,1812.4,171.7L1812.4,93.4" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M1812.4,89L1809.4,94.2C1810.3,93.7,1811.3,93.4,1812.4,93.4C1813.5,93.4,1814.5,93.7,1815.4,94.2L1812.4,89" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-40.4" width="82.8" fill="#ffffff" y="2"/><rect height="18" x="-35.3" width="73.6" fill="#ffffff" y="20"/><text class="st14"><tspan x="-40.5" y="17">virtqueue</tspan><tspan x="-35.5" y="35">(status)</tspan></text><rect height="18" x="794.3" width="138" fill="#ffffff" y="173.7"/><text class="st14"><tspan x="794.2" y="188.7">vring interrupt</tspan></text></g><g transform="translate(726.74,477.02)" id="shape84"><path d="M0,0L0,54.2C0,60.3,-4.9,65.2,-11,65.2L-130.8,65.2C-136.9,65.2,-141.8,70.1,-141.8,76.2L-141.8,92.8" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-141.8,97.2L-138.8,92C-139.7,92.5,-140.7,92.8,-141.8,92.8C-142.9,92.8,-143.9,92.5,-144.8,92L-141.8,97.2" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(726.74,477.02)" id="shape85"><path d="M0,0L0,54.2C0,60.3,4.9,65.2,11,65.2L129.6,65.2C135.6,65.2,140.6,70.1,140.6,76.2L140.6,92.8" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M140.6,97.2L143.6,92C142.7,92.5,141.6,92.8,140.6,92.8C139.5,92.8,138.4,92.5,137.6,92L140.6,97.2" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(867.3,623.06)" id="shape86"><path d="M0,0L0,190.6C0,196.7,4.9,201.6,11,201.6L1152.9,201.6C1159,201.6,1163.9,196.7,1163.9,190.6L1163.9,136.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M1163.9,132.2L1160.9,137.4C1161.8,136.9,1162.8,136.6,1163.9,136.6C1165,136.6,1166,136.9,1166.9,137.4L1163.9,132.2" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-40.4" width="82.8" fill="#ffffff" y="2"/><rect height="18" x="-35.3" width="73.6" fill="#ffffff" y="20"/><text class="st14"><tspan x="-40.5" y="17">virtqueue</tspan><tspan x="-35.5" y="35">(status)</tspan></text><rect height="18" x="448.4" width="138" fill="#ffffff" y="192.6"/><text class="st14"><tspan x="448.3" y="207.6">vring interrupt</tspan></text></g><g transform="translate(2142.15,484.33)" id="shape87"><path d="M162.7,20.6L162.7,11C162.7,4.9,157.8,0,151.7,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L151.7,31.6C157.8,31.6,162.7,26.7,162.7,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="23.4" y="21.8">stats_request</tspan></text></g><g transform="translate(2099.93,421.74)" id="shape88"><path d="M247.2,20.6L247.2,11C247.2,4.9,242.2,0,236.2,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L236.2,31.6C242.2,31.6,247.2,26.7,247.2,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="11.1" y="21.8">update_balloon_stats_func</tspan></text></g><g transform="translate(2223.52,569.61)" id="shape89"><path d="M0,0L0,-8C0,-11.9,3.1,-15,7,-15L172.1,-15C178.1,-15,183.1,-19.9,183.1,-26L183.1,-49.3" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M183.1,-53.6L180.1,-48.4C180.9,-49,182,-49.3,183.1,-49.3C184.2,-49.3,185.2,-49,186.1,-48.4L183.1,-53.6" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2223.52,585.43)" id="shape90"><path d="M0,0L0,-65.1" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-69.5L-3,-64.3C-2.1,-64.8,-1.1,-65.1,0,-65.1C1.1,-65.1,2.1,-64.8,3,-64.3L0,-69.5" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2223.52,484.33)" id="shape91"><path d="M0,0L-0,-26.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-0,-30.9L-3,-25.8C-2.1,-26.3,-1.1,-26.6,-0,-26.6C1.1,-26.6,2.1,-26.3,3,-25.8L-0,-30.9" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2099.93,359.16)" id="shape92"><path d="M247.2,20.6L247.2,11C247.2,4.9,242.2,0,236.2,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L236.2,31.6C242.2,31.6,247.2,26.7,247.2,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="34.1" y="21.8">stats_handle_request</tspan></text></g><g transform="translate(2099.93,296.57)" id="shape93"><path d="M247.2,20.6L247.2,11C247.2,4.9,242.2,0,236.2,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L236.2,31.6C242.2,31.6,247.2,26.7,247.2,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="34.1" y="21.8">update_balloon_stats</tspan></text></g><g transform="translate(2223.52,421.74)" id="shape94"><path d="M0,0L0,-26.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-30.9L-3,-25.8C-2.1,-26.3,-1.1,-26.6,0,-26.6C1.1,-26.6,2.1,-26.3,3,-25.8L0,-30.9" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2223.52,359.16)" id="shape95"><path d="M0,0L0,-26.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M0,-30.9L-3,-25.8C-2.1,-26.3,-1.1,-26.6,0,-26.6C1.1,-26.6,2.1,-26.3,3,-25.8L0,-30.9" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1926.39,170.02)" id="shape96"><path d="M247.2,20.6L247.2,11C247.2,4.9,242.2,0,236.2,0L11,0C4.9,0,0,4.9,0,11L0,20.6C0,26.7,4.9,31.6,11,31.6L236.2,31.6C242.2,31.6,247.2,26.7,247.2,20.6z" stroke="#839292" fill="#839292"/><text class="st14"><tspan x="61.1" y="21.8">virtqueue_kick</tspan></text></g><g transform="translate(1869.37,245.68)" id="shape97"><path d="M0,0L0,-8.5C0,-12.9,3.6,-16.5,8,-16.5L169.6,-16.5C175.7,-16.5,180.6,-21.4,180.6,-27.5L180.6,-39.6" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M180.6,-44L177.6,-38.8C178.5,-39.3,179.5,-39.6,180.6,-39.6C181.7,-39.6,182.7,-39.3,183.6,-38.8L180.6,-44" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2223.52,296.57)" id="shape98"><path d="M0,0L0,-42.5C0,-48.6,-4.9,-53.5,-11,-53.5L-162.5,-53.5C-168.6,-53.5,-173.5,-58.4,-173.5,-64.5L-173.5,-90.5" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-173.5,-94.9L-176.5,-89.7C-175.7,-90.2,-174.6,-90.5,-173.5,-90.5C-172.5,-90.5,-171.4,-90.2,-170.5,-89.7L-173.5,-94.9" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(1834.52,198.22)" id="shape99"><text class="st14"><tspan x="11.4" y="20.8">vb->pfns</tspan></text></g><g transform="translate(2118.09,220.92)" id="shape100"><text class="st14"><tspan x="15.5" y="21.8">vb->stats</tspan></text></g><g transform="translate(2344.94,546.91)" id="shape101"><text class="st14"><tspan x="4.296 13.296 22.296 31.296 40.296 49.296 58.296 67.296 76.296 85.296 94.296 " y="19">inflate_vq,</tspan><tspan x="4.296 13.296 22.296 31.296 40.296 49.296 58.296 67.296 76.296 85.296 " y="37">deflate_vq</tspan></text></g><g transform="translate(2118.08,516.09)" id="shape102"><text class="st14"><tspan x="24.3" y="22.4">stats_vq</tspan></text></g><g transform="translate(454.27,598.63)" id="shape103"><path d="M0,0L-21.5,0C-27.6,0,-32.5,-4.9,-32.5,-11L-32.5,-102.4C-32.5,-108.5,-37.4,-113.4,-43.5,-113.4L-116.4,-113.4" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-120.8,-113.4L-115.6,-110.4C-116.1,-111.3,-116.4,-112.4,-116.4,-113.4C-116.4,-114.5,-116.1,-115.6,-115.6,-116.4L-120.8,-113.4" stroke="#839292" stroke-width="1" fill="#839292"/></g><g transform="translate(2049.98,170.03)" id="shape104"><path d="M0,0L0,-53.5C0,-59.6,-4.9,-64.5,-11,-64.5L-1312.2,-64.5C-1318.3,-64.5,-1323.2,-59.6,-1323.2,-53.5L-1323.2,266.2" stroke="#839292" fill="none"/><path stroke-linecap="round" d="M-1323.2,270.6L-1320.2,265.4C-1321.1,265.9,-1322.1,266.2,-1323.2,266.2C-1324.3,266.2,-1325.3,265.9,-1326.2,265.4L-1323.2,270.6" stroke="#839292" stroke-width="1" fill="#839292"/><rect height="18" x="-855.3" width="119.6" fill="#ffffff" y="-73.5"/><text class="st14"><tspan x="-855.4" y="-58.5">status queue </tspan></text><rect height="18" x="-1350.1" width="55.2" fill="#ffffff" y="241.6"/><text class="st14"><tspan x="-1350.2" y="256.6">status</tspan></text></g><g transform="translate(1517,40)" id="shape105"><text class="st15"><tspan x="19" y="35.5">qemu后端</tspan></text></g><g transform="translate(1648.5,40)" id="shape106"><text class="st16"><tspan x="19" y="35.5">Guest前端</tspan></text></g><g transform="matrix(0,-1,1,0,1786,293)" id="shape107"><path d="M0,0C0,-393.7,27.5,-173.8,17.3,-4.3" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M17,0L20.3,-5C19.4,-4.5,18.4,-4.3,17.3,-4.4C16.2,-4.5,15.2,-4.8,14.3,-5.4L17,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="matrix(0,-1,1,0,1739,397)" id="shape108"><path d="M0,0C-8.9,-169,16.7,-272.8,17,-4.6" stroke="#236ea1" fill="none"/><path stroke-linecap="round" d="M17,0L20,-5.2C19.1,-4.7,18.1,-4.4,17,-4.4C15.9,-4.4,14.9,-4.7,14,-5.2L17,0" stroke="#236ea1" stroke-width="1" fill="#236ea1"/></g><g transform="translate(1521,340)" id="shape109"><text class="st17"><tspan x="35" y="16">vm-exit</tspan><tspan x="17" y="34">read config</tspan></text></g><g transform="translate(1524,234.07)" id="shape110"><text class="st17"><tspan x="35" y="16">vm-exit</tspan><tspan x="13" y="34">write config</tspan></text></g></g><g transform="translate(1128,2555)" id="page4"><rect height="794" x="0" width="1123" stroke="#808080" fill="#ffffff" y="0"/><path transform="translate(312.79,276.78)" d="M384.9,90C391.1,90,396.2,84.9,396.2,78.7L396.2,11.3C396.2,5.1,391.1,0,384.9,0L11.3,0C5.1,0,0,5.1,0,11.3L0,78.7C0,84.9,5.1,90,11.3,90L384.9,90z" stroke="#839292" id="shape111" stroke-width="3" fill="none"/><path transform="translate(251,136)" d="M616.7,90C622.9,90,628,84.9,628,78.7L628,11.3C628,5.1,622.9,0,616.7,0L11.3,0C5.1,0,0,5.1,0,11.3L0,78.7C0,84.9,5.1,90,11.3,90L616.7,90z" id="shape112" fill="#96a6a6" fill-opacity="0.62"/><g transform="translate(256.44,418)"><path d="M604.2,89C610.5,89,615.6,83.9,615.6,77.7L615.6,11.3C615.6,5.1,610.5,0,604.2,0L11.3,0C5.1,0,0,5.1,0,11.3L0,77.7C0,83.9,5.1,89,11.3,89L604.2,89z" id="shape113" fill="#96a6a6" fill-opacity="0.62"/><g transform="translate(-18.76,-4)" id="shape114"><text class="st18"><tspan x="39" y="29">Qemu</tspan></text></g></g><g transform="translate(355,438.25)" id="shape115"><path d="M174,48.5L174,0L0,0L0,48.5L174,48.5z" stroke="#3498db" fill="#236ea1"/><text class="st19"><tspan x="20" y="29.8">virtio-balloon设备</tspan></text></g><g transform="translate(363.65,158.5)" id="shape116"><path d="M172.7,45L172.7,0L0,0L0,45L172.7,45z" stroke="#3498db" fill="#236ea1"/><text class="st19"><tspan x="19.4" y="28">virtio-balloon驱动</tspan></text></g><g transform="translate(270,136)" id="shape117"><text class="st18"><tspan x="10" y="33.5">Guest</tspan></text></g><g transform="translate(352.66,298.14)" id="shape118"><text class="st20"><tspan x="9.2" y="26.4">inflate</tspan></text></g><path transform="translate(345,284.59)" d="M0,36C0,16.1,18.7,0,41.8,0C64.9,0,83.6,16.1,83.6,36C83.6,55.9,64.9,72,41.8,72C18.7,72,0,55.9,0,36zM3.2,36C3.2,54.4,20.5,69.3,41.8,69.3C63.2,69.3,80.5,54.4,80.5,36C80.5,17.6,63.2,2.7,41.8,2.7C20.5,2.7,3.2,17.6,3.2,36z" stroke="#3498db" id="shape119" fill="#3498db"/><path transform="matrix(0,1,-1,0,397.6,231)" d="M0,10.6L10.6,0L10.6,6.3L32.4,6.3L32.4,0L43,10.6L32.4,21.2L32.4,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape120" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><path transform="matrix(0,1,-1,0,397.6,371.8)" d="M0,10.6L10.6,0L10.6,6.3L33.6,6.3L33.6,0L44.2,10.6L33.6,21.2L33.6,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape121" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><path transform="matrix(0,1,-1,0,774,496)" d="M0,4L4,0L4,2.4L47,2.4L47,5.6L4,5.6L4,8.1L0,4z" stroke="#3498db" id="shape122" fill="#696969"/><g transform="translate(633.32,338.78)" id="shape123"><text class="st21"><tspan x="8.2" y="21.5">memory</tspan></text></g><g transform="translate(765.97,512)" id="shape124"><text class="st2"><tspan x="12.4" y="21">qmp命令</tspan></text></g><path transform="translate(452.71,285.78)" d="M0,36C0,16.1,18.7,0,41.8,0C64.9,0,83.6,16.1,83.6,36C83.6,55.9,64.9,72,41.8,72C18.7,72,0,55.9,0,36zM3.2,36C3.2,54.4,20.5,69.3,41.8,69.3C63.2,69.3,80.5,54.4,80.5,36C80.5,17.6,63.2,2.7,41.8,2.7C20.5,2.7,3.2,17.6,3.2,36z" stroke="#3498db" id="shape125" fill="#3498db"/><path transform="translate(553,283.59)" d="M0,36C0,16.1,18.7,0,41.8,0C64.9,0,83.6,16.1,83.6,36C83.6,55.9,64.9,72,41.8,72C18.7,72,0,55.9,0,36zM3.2,36C3.2,54.4,20.5,69.3,41.8,69.3C63.2,69.3,80.5,54.4,80.5,36C80.5,17.6,63.2,2.7,41.8,2.7C20.5,2.7,3.2,17.6,3.2,36z" stroke="#3498db" id="shape126" fill="#3498db"/><path transform="matrix(0,1,-1,0,754,246)" d="M0,12L12,0L12,7.2L160,7.2L160,16.8L12,16.8L12,24L0,12z" stroke="#bec8c8" id="shape127" fill="#bec8c8"/><path transform="matrix(0,1,-1,0,820,246)" d="M0,12L12,0L12,7.2L160,7.2L160,16.8L12,16.8L12,24L0,12z" stroke="#bec8c8" id="shape128" fill="#bec8c8"/><path transform="matrix(0,-1,1,0,271,401)" d="M0,12L12,0L12,7.2L165,7.2L165,16.8L12,16.8L12,24L0,12z" stroke="#bec8c8" id="shape129" fill="#bec8c8"/><g transform="translate(704,228)" id="shape130"><text class="st22"><tspan x="8" y="15.5">vring中断</tspan></text></g><g transform="translate(783,231)" id="shape131"><text class="st22"><tspan x="7" y="11.5">config change</tspan><tspan x="38" y="30.5">中断</tspan></text></g><g transform="translate(460.37,299.14)" id="shape132"><text class="st20"><tspan x="6.2" y="26.4">deflate</tspan></text></g><g transform="translate(560.66,298.14)" id="shape133"><text class="st20"><tspan x="10.2" y="26.4">status</tspan></text></g><path transform="matrix(0,1,-1,0,506.6,231)" d="M0,10.6L10.6,0L10.6,6.3L32.4,6.3L32.4,0L43,10.6L32.4,21.2L32.4,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape134" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><path transform="matrix(0,1,-1,0,605.6,231)" d="M0,10.6L10.6,0L10.6,6.3L32.4,6.3L32.4,0L43,10.6L32.4,21.2L32.4,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape135" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><path transform="matrix(0,1,-1,0,506.6,373)" d="M0,10.6L10.6,0L10.6,6.3L32.4,6.3L32.4,0L43,10.6L32.4,21.2L32.4,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape136" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><path transform="matrix(0,1,-1,0,605.6,373)" d="M0,10.6L10.6,0L10.6,6.3L32.4,6.3L32.4,0L43,10.6L32.4,21.2L32.4,14.8L10.6,14.8L10.6,21.2L0,10.6z" stroke="#ffffff" id="shape137" fill="#96a6a6" fill-opacity="0.53" stroke-opacity="0"/><g transform="translate(256.44,393.98)" id="shape138"><text class="st22"><tspan x="8.3" y="15.5">IO 请求</tspan></text></g><path transform="translate(930,285.78)" d="M125.7,224.8C131.9,224.8,137,219.7,137,213.5L137,11.3C137,5.1,131.9,0,125.7,0L11.3,0C5.1,0,0,5.1,0,11.3L0,213.5C0,219.7,5.1,224.8,11.3,224.8L125.7,224.8z" stroke="#6d7979" id="shape139" fill="#bec8c8"/><g transform="translate(930,430)" id="shape140"><path d="M126.7,47C132.9,47,138,41.9,138,35.7L138,11.3C138,5.1,132.9,0,126.7,0L11.3,0C5.1,0,0,5.1,0,11.3L0,35.7C0,41.9,5.1,47,11.3,47L126.7,47z" stroke="#236ea1" fill="#236ea1"/><text class="st19"><tspan x="50" y="29">Used</tspan></text></g><g transform="translate(936,315)" id="shape141"><path d="M0,35.2C0,15.8,24.2,0,54,0C83.8,0,108,15.8,108,35.2C108,54.6,83.8,70.4,54,70.4C24.2,70.4,0,54.6,0,35.2z" stroke="#3498db" fill="#3498db"/><text class="st1"><tspan x="26" y="41.2">Balloon</tspan></text></g><g transform="translate(919,286)" id="shape142"><text class="st23"><tspan x="17" y="20.5">Guest内存</tspan></text></g></g></svg>